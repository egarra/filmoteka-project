{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BCAAC,EAAAD,EAAA,S,0BAKA,IAAIE,EACAC,EAEW,SAAAC,EAAoBC,EAAMC,EAAWC,GAClDL,EAAUG,EAAKG,KACfL,EAAgBE,EAAKI,YACrB,IAAIC,EAAQ,EACRC,OAAOC,OAAOC,OAAS,MACzBH,EAAQ,GAGV,MAAMI,EAAYC,SAASC,eAAe,4BAEpCC,EAAU,CACdC,WAAYf,EACZgB,aAAc,GACdC,aAAcV,EACdF,KAAMN,EACNmB,aAAa,EACbC,SAAU,CACRd,KAAM,4CACNe,YAAa,wDACbC,WAAY,kDACZC,WACE,0HAMAC,EAAa,IAAIC,EAAA1B,GAAJ,CAAea,EAAWG,GAC3BF,SAASa,cAAc,cAC/BC,YAAcC,KAAKC,MAAM5B,EAAgB,IAEnDuB,EAAWM,GAAG,aAAaC,IACzB,MAAMV,EAAcU,EAAMzB,KAY1B,GAXkB,aAAdF,GACF,EAAA4B,EAAAC,WAAU,WAAY,CAAE3B,KAAMe,IAAea,MAAKC,KAChD,EAAAtC,EAAAuC,iBAAgBD,EAAIhC,KAAKkC,QAAQ,IAEZ,kBAAdjC,IACT,EAAA4B,EAAAC,WAAU,gBAAiB,CAAE3B,KAAMe,EAAaiB,MAAOjC,IAAa6B,MAClEC,KACE,EAAAtC,EAAAuC,iBAAgBD,EAAIhC,KAAKkC,QAAQ,IAInCN,EAAMzB,KAAO,EAAG,CACCO,SAASa,cAAc,eAC/BC,YAAc,G,KDjDxB,MAAMY,EAAaC,MAAMlC,IACdO,SAASa,cAAc,mBAC/Be,UAAYC,EAAAC,QACpB,MAAMR,QAAY,EAAAH,EAAAC,WAAUD,EAAAY,SAAU,CAAEtC,KAAc,KAEtD,EAAAT,EAAAuC,iBAAgBD,EAAIhC,KAAKkC,SACzBnC,EAAWiC,EAAIhC,KAAM,WAAW,EAG5B0C,EAAOhC,SAASa,cAAc,iBACpCb,SAASa,cAAc,sBAAsBoB,iBAAiB,SAAS,KACrEP,IACAM,EAAKE,OAAO,IAEdlC,SAASa,cAAc,eAAeoB,iBAAiB,SAAS,KAC9DP,IACAM,EAAKE,OAAO,IAEdR,IEvBA1C,EAAAC,EAAA,S,0BAK+B,MAC7B,MAAMkD,EAAOnC,SAASa,cAAc,iBACpC,IAAIY,EACJ,MAAMW,EAAapC,SAASa,cAAc,uBAE1CsB,EAAKF,iBAAiB,UAEtBN,eAAwBU,GACtBA,EAAEC,iBACFF,EAAWtB,YAAc,GAEzB,MAAMyB,YAAEA,GAAgBF,EAAEG,cAC1B,GAAIf,IAAUc,EAAYE,MACxB,OAGF,MAAMC,EAAU1C,SAASa,cAAc,mBAEvCY,EAAQc,EAAYE,MAEpB,MAAMnB,QAAY,EAAAH,EAAAC,WAAUD,EAAAwB,cAAe,CAAElD,KAAM,E,MAAGgC,IAEtD,GAAgC,IAA5BH,EAAIhC,KAAKkC,QAAQoB,OAGnB,YAFAR,EAAWtB,YACT,wDAGJ4B,EAAQd,UAAYC,EAAAC,SACpB,EAAA9C,EAAAuC,iBAAgBD,EAAIhC,KAAKkC,SACzBnC,EAAWiC,EAAIhC,KAAM,gBAAiBmC,E,KAI1CoB,G","sources":["src/js/utilities/onTrending.js","src/js/utilities/pagination.js","src/js/utilities/onFindFilmTitle.js"],"sourcesContent":["import { onRenderGallery } from './onRenderGallery';\nimport { fetchData, TRENDING } from './fetchData';\nimport { loading } from '../constants/loading';\nimport Pagination from './pagination';\n\nexport const onTrending = async page => {\n  const gallery = document.querySelector('.film-selection');\n  gallery.innerHTML = loading;\n  const res = await fetchData(TRENDING, { page: (page = 1) });\n\n  onRenderGallery(res.data.results);\n  Pagination(res.data, 'TRENDING');\n};\n\nconst form = document.querySelector('.header__form');\ndocument.querySelector('.header-logo__link').addEventListener('click', () => {\n  onTrending();\n  form.reset();\n});\ndocument.querySelector('[data-home]').addEventListener('click', () => {\n  onTrending();\n  form.reset();\n});\nonTrending();\n","import Pagination from 'tui-pagination';\n// import 'tui-pagination/dist/tui-pagination.css';\nimport { fetchData } from './fetchData';\nimport { onRenderGallery } from './onRenderGallery';\n\nlet pageNum;\nlet totalItemsNum;\n\nexport default function Pagination(data, queryType, queryWord) {\n  pageNum = data.page;\n  totalItemsNum = data.total_pages;\n  let pages = 5;\n  if (window.screen.width >= 768) {\n    pages = 9;\n  }\n\n  const container = document.getElementById('tui-pagination-container');\n\n  const options = {\n    totalItems: totalItemsNum,\n    itemsPerPage: 20,\n    visiblePages: pages,\n    page: pageNum,\n    centerAlign: true,\n    template: {\n      page: '<a href=\"#\" class=\"page-btn\">{{page}}</a>',\n      currentPage: '<a href=\"#\" class=\"page-btn is-selected\">{{page}}</a>',\n      moveButton: '<a href=\"#\" class=\"page-btn page-{{type}}\"></a>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\" id=\"point-{{type}}\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n\n  const pagination = new Pagination(container, options);\n  const lastBtnEl = document.querySelector('.page-last');\n  lastBtnEl.textContent = Math.round(totalItemsNum / 20);\n\n  pagination.on('afterMove', event => {\n    const currentPage = event.page;\n    if (queryType === 'TRENDING') {\n      fetchData('TRENDING', { page: currentPage }).then(res => {\n        onRenderGallery(res.data.results);\n      });\n    } else if (queryType === 'SEARCH_MOVIES') {\n      fetchData('SEARCH_MOVIES', { page: currentPage, query: queryWord }).then(\n        res => {\n          onRenderGallery(res.data.results);\n        }\n      );\n    }\n    if (event.page > 1) {\n      const firstBtnEl = document.querySelector('.page-first');\n      firstBtnEl.textContent = '1';\n    }\n  });\n}\n","import { onRenderGallery } from './onRenderGallery';\nimport { fetchData, SEARCH_MOVIES } from './fetchData';\nimport { loading } from '../constants/loading';\nimport Pagination from './pagination';\n\nexport const onFindFilmTitle = () => {\n  const form = document.querySelector('.header__form');\n  let query;\n  const errorField = document.querySelector('.header-error__text');\n\n  form.addEventListener('submit', onSubmit);\n\n  async function onSubmit(e) {\n    e.preventDefault();\n    errorField.textContent = '';\n\n    const { searchQuery } = e.currentTarget;\n    if (query === searchQuery.value) {\n      return;\n    }\n\n    const gallery = document.querySelector('.film-selection');\n\n    query = searchQuery.value;\n\n    const res = await fetchData(SEARCH_MOVIES, { page: 1, query });\n\n    if (res.data.results.length === 0) {\n      errorField.textContent =\n        'There is no films with such name. Please, try again.';\n      return;\n    }\n    gallery.innerHTML = loading;\n    onRenderGallery(res.data.results);\n    Pagination(res.data, 'SEARCH_MOVIES', query);\n  }\n};\n\nonFindFilmTitle();\n"],"names":["$kJc72","parcelRequire","$fb9GJ","$c43f51bcb0d2d6e3$var$pageNum","$c43f51bcb0d2d6e3$var$totalItemsNum","$c43f51bcb0d2d6e3$export$2e2bcd8739ae039","data","queryType","queryWord","page","total_pages","pages","window","screen","width","container","document","getElementById","options","totalItems","itemsPerPage","visiblePages","centerAlign","template","currentPage","moveButton","moreButton","pagination","$parcel$interopDefault","querySelector","textContent","Math","round","on","event","$NIOgM","fetchData","then","res","onRenderGallery","results","query","$a2c42bc6bfe3e979$export$105d94fe592039ac","async","innerHTML","$lkrYr","loading","TRENDING","$a2c42bc6bfe3e979$var$form","addEventListener","reset","form","errorField","e","preventDefault","searchQuery","currentTarget","value","gallery","SEARCH_MOVIES","length","$964ec52e1afbe5f3$export$8f8a41cec030ce32"],"version":3,"file":"index.c767213d.js.map"}